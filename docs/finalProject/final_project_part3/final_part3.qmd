
---
title: "DATA304 - Final Project Part 3"
format: html
editor: visual
author: "David Kim"
---
# Part 3 - New Challenge
```{python}
#necessary imports
import pandas as pd
import altair as alt
```

```{python}
# data 
q3_url= 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRZPVRZzK8tZAH6qeVEc1HzgFR9iTcIjj__HC66LGGFcwHoUiFA1yWc2MT_4MRPvs8VjA1BGy5pNnQd/pub?gid=0&single=true&output=csv'
q3_data = pd.read_csv(q3_url)

for col in q3_data.columns:
    print(col)
print(q3_data.head())

q3_data = q3_data.rename(columns={
    'fetality_rate': 'Women Fertility rate(Ages 15-49)',
    'unmet_need_familyplan_pc': 'Unmet Need for Family Planning-Women',
    'contraception_use_pc': 'Current Contraception Use-Women'
})


# Divide the percentage values by 100 to get the correct percentage
q3_data['Unmet Need for Family Planning-Women'] /= 100
q3_data['Current Contraception Use-Women'] /= 100

column = ['Unmet Need for Family Planning-Women', 'Current Contraception Use-Women']

q3chart = alt.Chart(q3_data, width = 500).mark_line(point = True).encode(
    x=alt.X('DHS_survey_year:N',title=None, axis=None),
    y=alt.Y(alt.repeat('layer'), type='quantitative', title = "Percentage", scale=alt.Scale(domain=[0, 1])).axis(format  = "%"),
    color=alt.ColorDatum(alt.repeat('layer'))
).repeat(
    layer  = column
)

fertility_rate_chart = alt.Chart(q3_data, width=500, height = 50).mark_line(point = True ).encode(
    x=alt.X('DHS_survey_year:N', title='Survey Year', axis=alt.Axis(labelAngle=0)),
    y=alt.Y('Women Fertility rate(Ages 15-49):Q', title='Fertility Rate',scale=alt.Scale(domain=[0, 7])),
    color=alt.value("red")
)

# Concatenate both charts vertically
combined_chart = alt.vconcat(q3chart, fertility_rate_chart)


combined_chart.properties( title = 'More Individuals Opting for Contraception Methods Over Time')

```
#### Palette Usage for Part 3

an encoding channel other than x or y : color

layers : repeat layer 

concatenation : vconcat

non-default configuration of a channelâ€™s scale or guide : width and height, scale(%)



### Part 3 Story
From 1991 to 2016, the grpahics indicate a consistent trend of slight decreases in both fertility rates and the unmet need for family planning. However, this decline does not appear to be significant over the studied period. In contrast, there is a notable increase in contraception use, which has risen from 5.9% to 38.4% during the same timeframe. This suggests a positive shift in reproductive health behaviors, with more individuals opting for contraception methods over time.

